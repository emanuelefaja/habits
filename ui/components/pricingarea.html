{{define "pricingarea"}}
<!-- Pricing Section -->
<section id="pricing" class="py-16 bg-white dark:bg-gray-800 scroll-mt-20" x-data="{ 
    challengeModalOpen: false,
    selectedChallenge: '',
    challenges: [
        { id: 'morning', emoji: 'üèÉ', name: 'Morning Routine Challenge', desc: 'Build a powerful morning routine' },
        { id: 'fitness', emoji: 'üí™', name: 'Fitness Challenge', desc: 'Get fit with daily exercise' },
        { id: 'reading', emoji: 'üìö', name: 'Reading Challenge', desc: 'Read 20 pages every day' },
        { id: 'meditation', emoji: 'üßò', name: 'Meditation Challenge', desc: '10 mins daily meditation' },
        { id: 'journaling', emoji: 'üìù', name: 'Journaling Challenge', desc: 'Write daily reflections' },
        { id: 'sleep', emoji: 'üí§', name: 'Sleep Challenge', desc: '8 hours nightly quality sleep' },
        { id: 'nutrition', emoji: 'ü•ó', name: 'Nutrition Challenge', desc: 'Eat healthy every meal' },
        { id: 'hydration', emoji: 'üíß', name: 'Hydration Challenge', desc: 'Drink 8 glasses of water daily' },
        { id: 'nosocial', emoji: 'üö´', name: 'No Social Media', desc: 'Digital detox challenge' },
        { id: 'goals', emoji: 'üéØ', name: 'Goal Setting', desc: 'Set & review daily goals' },
        { id: 'financial', emoji: 'üí∏', name: 'Financial Fitness', desc: 'Track spending & save daily' },
        { id: 'declutter', emoji: 'üßπ', name: 'Declutter Challenge', desc: 'Organize your space daily' }
    ]
}">
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
        <h2 class="text-4xl sm:text-5xl font-black tracking-tight text-center text-gray-900 dark:text-white mb-4">
            Start with a month. Stay for a lifetime.
        </h2>
        <p class="mt-4 max-w-2xl mx-auto text-center text-xl text-gray-500 dark:text-gray-300">
            Select the option that best fits your goals and commitment level
        </p>
        
        <div class="mt-12 space-y-8 lg:space-y-0 lg:grid lg:grid-cols-3 lg:gap-8">
            <!-- Starter Package Plan -->
            <div class="border border-gray-200 dark:border-gray-700 rounded-lg shadow-sm p-8 bg-white dark:bg-gray-900 flex flex-col">
                <h3 class="text-2xl font-extrabold text-gray-900 dark:text-white">1 Habit Challenge</h3>
                <div class="mt-4 flex items-baseline">
                    <span class="text-lg font-medium text-gray-500 dark:text-gray-400 line-through mr-2">$147</span>
                    <span id="foundationsPrice" class="text-5xl font-extrabold tracking-tight text-gray-900 dark:text-white">$49</span>
                </div>
                <p class="mt-5 text-lg text-gray-500 dark:text-gray-400">Choose one habit. Make it happen.</p>
                
                <ul class="mt-6 space-y-4 flex-1">
                    <li class="flex items-start">
                        <div class="flex-shrink-0">
                            <svg class="h-6 w-6 text-habit-color-green-core" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7" />
                            </svg>
                        </div>
                        <p class="ml-3 text-base text-gray-700 dark:text-gray-300"><strong>Everything in Habit Tracker</strong></p>
                    </li>
                    <li class="flex items-start">
                        <div class="flex-shrink-0">
                            <svg class="h-6 w-6 text-habit-color-green-core" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7" />
                            </svg>
                        </div>
                        <p class="ml-3 text-base text-gray-700 dark:text-gray-300">Foundations of Habit Building</p>
                    </li>
                    <li class="flex items-start">
                        <div class="flex-shrink-0">
                            <svg class="h-6 w-6 text-habit-color-green-core" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7" />
                            </svg>
                        </div>
                        <p class="ml-3 text-base text-gray-700 dark:text-gray-300">5+ hours of videos</p>
                    </li>
                    <li class="flex items-start">
                        <div class="flex-shrink-0">
                            <svg class="h-6 w-6 text-habit-color-green-core" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7" />
                            </svg>
                        </div>
                        <p class="ml-3 text-base text-gray-700 dark:text-gray-300">Habit Triggers & Cues</p>
                    </li>
                    <li class="flex items-start">
                        <div class="flex-shrink-0">
                            <svg class="h-6 w-6 text-habit-color-green-core" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7" />
                            </svg>
                        </div>
                        <div class="relative group">
                            <div class="flex items-center cursor-pointer">
                                <p class="ml-3 text-base text-gray-700 dark:text-gray-300">1 Habit Challenge</p>
                                <span class="ml-2 inline-flex items-center px-2 py-0.5 rounded text-xs font-medium border-2 border-dashed border-habit-color-green-core bg-habit-color-green-tint-2 dark:bg-gray-800 text-habit-color-green-core">
                                    See options
                                </span>
                            </div>
                            <div class="absolute left-0 mt-2 w-64 bg-white dark:bg-gray-800 rounded-lg shadow-lg p-4 hidden group-hover:block z-10 border border-gray-200 dark:border-gray-700">
                                <div class="space-y-2">
                                    <p class="text-sm font-medium text-gray-900 dark:text-white mb-2">Choose from:</p>
                                    <div class="flex items-center text-sm text-gray-700 dark:text-gray-300">
                                        <span class="text-xl mr-2">üèÉ</span>
                                        <span>Morning Routine Challenge</span>
                                    </div>
                                    <div class="flex items-center text-sm text-gray-700 dark:text-gray-300">
                                        <span class="text-xl mr-2">üí™</span>
                                        <span>Fitness Challenge</span>
                                    </div>
                                    <div class="flex items-center text-sm text-gray-700 dark:text-gray-300">
                                        <span class="text-xl mr-2">üìö</span>
                                        <span>Reading Challenge</span>
                                    </div>
                                    <div class="flex items-center text-sm text-gray-700 dark:text-gray-300">
                                        <span class="text-xl mr-2">üßò</span>
                                        <span>Meditation Challenge</span>
                                    </div>
                                    <div class="flex items-center text-sm text-gray-700 dark:text-gray-300">
                                        <span class="text-xl mr-2">üìù</span>
                                        <span>Journaling Challenge</span>
                                    </div>
                                    <div class="flex items-center text-sm text-gray-700 dark:text-gray-300">
                                        <span class="text-xl mr-2">üí§</span>
                                        <span>Sleep Challenge</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </li>
                    <li class="flex items-start">
                        <div class="flex-shrink-0">
                            <svg class="h-6 w-6 text-habit-color-green-core" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7" />
                            </svg>
                        </div>
                        <p class="ml-3 text-base text-gray-700 dark:text-gray-300">Additional Habit Challenges: <span id="additionalChallengePrice">$49</span></p>
                    </li>
                    <li class="flex items-start">
                        <div class="flex-shrink-0">
                            <svg class="h-6 w-6 text-habit-color-green-core" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7" />
                            </svg>
                        </div>
                        <p class="ml-3 text-base text-gray-700 dark:text-gray-300">Course certificate upon completion</p>
                    </li>
                </ul>
                
                <div class="mt-8">
                    <button @click="challengeModalOpen = true" class="block w-full bg-habit-color-green-core border border-transparent rounded-md py-3 px-5 text-center text-white font-medium hover:bg-opacity-90 transition-colors duration-200">
                        Start Now
                    </button>
                    <div class="text-sm text-gray-500 dark:text-gray-400 text-center mt-2">Pay once. Access forever.</div>
                </div>
            </div>
            
            <!-- Lifelong Learner Plan -->
            <div class="border-4 border-habit-color-green-core rounded-lg shadow-lg p-8 bg-white dark:bg-gray-900 flex flex-col relative">
                <div class="absolute top-0 left-1/2 transform -translate-x-1/2 -translate-y-1/2">
                    <span class="inline-flex items-center px-3 py-1 rounded-full text-sm font-medium bg-habit-color-green-core text-white dark:bg-habit-color-green-core dark:text-white">
                        Most Popular
                    </span>
                </div>
                
                <h3 class="text-2xl font-extrabold text-gray-900 dark:text-white">Full Access</h3>
                <div class="mt-4 flex items-baseline">
                    <span class="text-lg font-medium text-gray-500 dark:text-gray-400 line-through mr-2">$637</span>
                    <span id="masterclassPrice" class="text-5xl font-extrabold tracking-tight text-gray-900 dark:text-white">$245</span>
                </div>
                <p class="mt-5 text-lg text-gray-500 dark:text-gray-400">All habit challenges. Full transformation.</p>
                
                <ul class="mt-6 space-y-4 flex-1">
                    <li class="flex items-start">
                        <div class="flex-shrink-0">
                            <svg class="h-6 w-6 text-habit-color-green-core" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7" />
                            </svg>
                        </div>
                        <p class="ml-3 text-base text-gray-700 dark:text-gray-300"><strong>Everything in Foundations</strong></p>
                    </li>
                    <li class="flex items-start">
                        <div class="flex-shrink-0">
                            <svg class="h-6 w-6 text-habit-color-green-core" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7" />
                            </svg>
                        </div>
                        <p class="ml-3 text-base text-gray-700 dark:text-gray-300">All Habit Challenges (12x @ $558 value)</p>
                    </li>
                    <li class="flex items-start">
                        <div class="flex-shrink-0">
                            <svg class="h-6 w-6 text-habit-color-green-core" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7" />
                            </svg>
                        </div>
                        <p class="ml-3 text-base text-gray-700 dark:text-gray-300">20+ hours of videos</p>
                    </li>
                    <!-- <li class="flex items-start">
                        <div class="flex-shrink-0">
                            <svg class="h-6 w-6 text-habit-color-green-core" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7" />
                            </svg>
                        </div>
                        <p class="ml-3 text-base text-gray-700 dark:text-gray-300">Course certificate upon completion</p>
                    </li> -->
                </ul>
                
                <!-- Exclusive box -->
                <div class="mt-6 border-2 border-habit-color-green-core rounded-lg p-6 bg-habit-color-green-tint-2 dark:bg-gray-800 relative">
                    <div class="absolute top-0 left-1/2 transform -translate-x-1/2 -translate-y-1/2">
                        <span class="inline-flex items-center px-3 py-1 rounded-full text-sm font-medium bg-habit-color-green-core text-white dark:bg-habit-color-green-core dark:text-white">
                            Exclusive
                        </span>
                    </div>
                    
                    <ul class="space-y-4">
                        <li class="flex items-start">
                            <div class="flex-shrink-0">
                                <svg class="h-6 w-6 text-habit-color-green-core" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7" />
                                </svg>
                            </div>
                            <p class="ml-3 text-base text-gray-700 dark:text-gray-300">Downloadable Videos</p>
                        </li>
                        <li class="flex items-start">
                            <div class="flex-shrink-0">
                                <svg class="h-6 w-6 text-habit-color-green-core" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7" />
                                </svg>
                            </div>
                            <p class="ml-3 text-base text-gray-700 dark:text-gray-300">Downloadable Transcripts</p>
                        </li>
                        <li class="flex items-start">
                            <div class="flex-shrink-0">
                                <svg class="h-6 w-6 text-habit-color-green-core" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7" />
                                </svg>
                            </div>
                            <div class="flex items-center flex-1">
                                <p class="ml-3 text-base text-gray-700 dark:text-gray-300">All updates</p>
                                <span class="ml-2 whitespace-nowrap inline-flex items-center px-2 py-0.5 rounded text-xs font-medium bg-habit-color-green-core text-white">
                                    Updated 3d ago
                                </span>
                            </div>
                        </li>
                        <li class="flex items-start">
                            <div class="flex-shrink-0">
                                <svg class="h-6 w-6 text-habit-color-green-core" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7" />
                                </svg>
                            </div>
                            <p class="ml-3 text-base text-gray-700 dark:text-gray-300">WhatsApp Community</p>
                        </li>
                        <li class="flex items-start">
                            <div class="flex-shrink-0">
                                <svg class="h-6 w-6 text-habit-color-green-core" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7" />
                                </svg>
                            </div>
                            <p class="ml-3 text-base text-gray-700 dark:text-gray-300">Additional Bonuses</p>
                        </li>
                    </ul>
                </div>
                
                <div class="mt-8">
                    <button id="masterclassCheckoutButton" class="block w-full bg-habit-color-green-core border border-transparent rounded-md py-3 px-5 text-center text-white font-medium hover:bg-opacity-90 transition-colors duration-200">
                        Start Now
                    </button>
                    <div class="text-sm text-gray-500 dark:text-gray-400 text-center mt-2">Pay once. Access forever.</div>
                </div>
            </div>
            
            <!-- Ultimate Plan -->
            <div class="border border-gray-200 dark:border-gray-700 rounded-lg shadow-sm p-8 bg-white dark:bg-gray-900 flex flex-col">
                <h3 class="text-2xl font-extrabold text-gray-900 dark:text-white">1:1 Coaching Support</h3>
                <div class="mt-4 flex items-baseline">
                    <span class="text-lg font-medium text-gray-500 dark:text-gray-400 line-through mr-2">$1,997</span>
                    <span class="text-5xl font-extrabold tracking-tight text-gray-900 dark:text-white">$999</span>
                </div>
                <p class="mt-5 text-lg text-gray-500 dark:text-gray-400">Get extra coaching from Mike (be warned, Manny says he's nerdy)</p>
                
                <ul class="mt-6 space-y-4 flex-1">
                    <li class="flex items-start">
                        <div class="flex-shrink-0">
                            <svg class="h-6 w-6 text-habit-color-green-core" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7" />
                            </svg>
                        </div>
                        <p class="ml-3 text-base text-gray-700 dark:text-gray-300"><strong>Everything in Full Access</strong></p>
                    </li>
                    <li class="flex items-start">
                        <div class="flex-shrink-0">
                            <svg class="h-6 w-6 text-habit-color-green-core" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7" />
                            </svg>
                        </div>
                        <p class="ml-3 text-base text-gray-700 dark:text-gray-300">1-on-1 Coaching Sessions (4x)</p>
                    </li>
                    <li class="flex items-start">
                        <div class="flex-shrink-0">
                            <svg class="h-6 w-6 text-habit-color-green-core" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7" />
                            </svg>
                        </div>
                        <p class="ml-3 text-base text-gray-700 dark:text-gray-300">Personalized Habit Plan</p>
                    </li>
                    <li class="flex items-start">
                        <div class="flex-shrink-0">
                            <svg class="h-6 w-6 text-habit-color-green-core" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7" />
                            </svg>
                        </div>
                        <p class="ml-3 text-base text-gray-700 dark:text-gray-300">Accountability Partner Matching</p>
                    </li>
                </ul>
                <div class="mt-8">
                    <button id="ultimateCheckoutButton" class="block w-full bg-habit-color-green-core border border-transparent rounded-md py-3 px-5 text-center text-white font-medium hover:bg-opacity-90 transition-colors duration-200">
                        Start Now
                    </button>
                    <div class="text-sm text-gray-500 dark:text-gray-400 text-center mt-2">Pay once. Access forever.</div>
                </div>
            </div>
        </div>
               <!-- Guarantee Letter - now positioned inside pricing section -->
               <div class="mt-16 max-w-4xl mx-auto border-dashed border-4 border-habit-color-green-core rounded-lg p-8 bg-habit-color-green-tint-2 dark:bg-gray-800">
                <h3 class="text-2xl font-bold text-gray-900 dark:text-white mb-4">Our No Non-sense Personal Guarantee</h3>

                <div class="prose prose-lg max-w-none text-gray-600 dark:text-gray-300">
                    <p>Dear Future Habit Hacker,</p>

                    <p>We're Manny & Mike, the founders of The Habits Company.</p>
                    
                    <p>Between us, we've spent years applying behavior change science at organizations like Nike, Coca-Cola, the United Nations, various governments, and Google [x]. We've seen firsthand how behavioral science can change organizations, communities, and entire populations.</p>

                    <p>But in all our work, it's helping everyday people, we find the most rewarding. Through our courses, we've seen busy professionals recover from burnout, young people discover a new level of confidence, and parents struggling with depression to find their spark again. New habits can change lives.</p>

                    <p><b>This leads to our commitment: We're dedicated to helping you, help yourself.</b></p>

                    <p><b>We're so confident in the transformative power of our 30-Day Habit Challenges, that if you don't find value in your purchase within 7 days, we'll give you 100% of your money back, no questions asked.</b></p>

                    <p>All of our Challenges are written by us (sorry AI!) and tested by the people we love. Best part is, we're just getting started. We're continually improving our original challenges and have new ones coming in the pipeline. We keep getting better, so you do too.</p>

                    <p>All we ask is, once you sign up, consider getting started as soon as you sign up (even if one 5-minute lesson). We find the people who get the best results, are the ones who take first steps immediately. Momentum matters.</p>

                    <p>We're in this together. Let's make it happen.</p>

                    <div class="mt-6 flex items-center justify-center sm:justify-start space-x-12">
                        <div class="flex flex-col items-center">
                            <div class="w-24 h-36 rounded-md overflow-hidden">
                                <img src="/static/images/manny.png" alt="Manny" class="w-full h-full object-cover">
                            </div>
                            <p class="mt-2 text-sm font-semibold text-gray-900 dark:text-white">Manny</p>
                        </div>

                        <div class="flex flex-col items-center">
                            <div class="w-24 h-36 rounded-md overflow-hidden">
                                <img src="/static/images/mike.png" alt="Mike" class="w-full h-full object-cover">
                            </div>
                            <p class="mt-2 text-sm font-semibold text-gray-900 dark:text-white">Mike</p>
                        </div>
                    </div>
    </div>

    <!-- Challenge Selector Modal -->
    <div 
        x-show="challengeModalOpen" 
        x-cloak
        class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4"
        @click="challengeModalOpen = false">

        <div class="bg-white dark:bg-gray-900 rounded-lg p-0 w-full max-w-4xl flex flex-col max-h-[90vh]" 
             @click.stop>
            <!-- Header -->
            <div class="flex justify-between items-center px-6 py-4 border-b border-gray-200 dark:border-gray-700">
                <h2 class="text-2xl font-bold text-gray-900 dark:text-white">
                    Choose Your 30-Day Habit Challenge
                </h2>
                <button @click="challengeModalOpen = false" class="text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200">
                    <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12" />
                    </svg>
                </button>
            </div>

            <!-- Main Content -->
            <div class="flex-1 overflow-y-auto p-6">
                <p class="text-lg text-gray-600 dark:text-gray-400 mb-6">
                    Pick ONE challenge to start your transformation:
                </p>
                
                <!-- Challenge Grid -->
                <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4">
                    <template x-for="challenge in challenges" :key="challenge.id">
                        <button 
                            @click="selectedChallenge = challenge.id"
                            :class="{
                                'ring-2 ring-habit-color-green-core bg-habit-color-green-tint-2 dark:bg-gray-800': selectedChallenge === challenge.id,
                                'hover:border-gray-400 dark:hover:border-gray-600': selectedChallenge !== challenge.id
                            }"
                            class="p-6 border border-gray-200 dark:border-gray-700 rounded-lg text-left transition-all bg-white dark:bg-gray-900">
                            <div class="text-3xl mb-3" x-text="challenge.emoji"></div>
                            <h3 class="font-semibold text-gray-900 dark:text-white mb-2" x-text="challenge.name"></h3>
                            <p class="text-sm text-gray-600 dark:text-gray-400" x-text="challenge.desc"></p>
                        </button>
                    </template>
                </div>
            </div>

            <!-- Footer -->
            <div class="flex justify-end space-x-4 px-6 py-4 border-t border-gray-200 dark:border-gray-700">
                <button 
                    @click="challengeModalOpen = false"
                    class="px-6 py-2 rounded-md bg-gray-300 dark:bg-gray-700 text-gray-700 dark:text-gray-300 hover:bg-gray-400 dark:hover:bg-gray-600 transition-colors duration-200">
                    Cancel
                </button>
                <button
                    @click="
                        if (selectedChallenge) {
                            console.log('Selected challenge:', selectedChallenge);
                            challengeModalOpen = false;
                            
                            Paddle.Checkout.open({
                                settings: {
                                    displayMode: 'overlay',
                                    theme: 'light',
                                    locale: 'en',
                                    successUrl: window.location.origin + '/success'
                                },
                                items: [{
                                    priceId: 'pri_01jrzn9mekj4dnxsx39vd473v2',
                                    quantity: 1
                                }]
                            });
                        }
                    "
                    :disabled="!selectedChallenge"
                    class="px-6 py-2 rounded-md text-white transition-colors duration-200"
                    :class="{
                        'opacity-50 cursor-not-allowed bg-gray-400': !selectedChallenge,
                        'bg-habit-color-green-core hover:bg-opacity-90': selectedChallenge
                    }">
                    Continue ‚Üí
                </button>
            </div>
        </div>
    </div>

</section>

<!-- Paddle Script -->
<script>
    Paddle.Environment.set("production");
        Paddle.Initialize({
            token: 'live_526feb342cc6ac20e8de55d0208',
            pwCustomer: {}
    });
    // Format price function to remove .00 decimal places
    function formatPrice(paddlePrice) {
        return paddlePrice.replace(/\.00($|\s)/, '$1');
    }
    
    // Masterclass Price
    Paddle.PricePreview({
        items: [{
            priceId: 'pri_01jrzccsfd2dfbb557kce1g668',
            quantity: 1
        }]
    }).then((result) => {
        const priceElement = document.getElementById('masterclassPrice');
        if (priceElement) {
            // Get the formatted price from Paddle
            let formattedPrice = result.data.details.lineItems[0].formattedTotals.total;
            
            // Remove the decimal part if it's ".00"
            formattedPrice = formatPrice(formattedPrice);
            
            priceElement.textContent = formattedPrice;
        }
    }).catch((error) => {
        console.error('Masterclass price preview error:', error);
    });
    
    // Setup checkout button for Masterclass
    document.getElementById('masterclassCheckoutButton').addEventListener('click', function() {
        Paddle.Checkout.open({
            settings: {
                displayMode: 'overlay',
                theme: 'light',
                locale: 'en',
                successUrl: window.location.origin + '/success'
            },
            items: [{
                priceId: 'pri_01jrzccsfd2dfbb557kce1g668',
                quantity: 1
            }]
        });
    });
    
    // Foundations Price - also used for Additional Challenge Price
    Paddle.PricePreview({
        items: [{
            priceId: 'pri_01jrzn9mekj4dnxsx39vd473v2',
            quantity: 1
        }]
    }).then((result) => {
        // Get the formatted price from Paddle
        let formattedPrice = result.data.details.lineItems[0].formattedTotals.total;
        
        // Remove the decimal part if it's ".00"
        formattedPrice = formatPrice(formattedPrice);
        
        // Update Foundations Price
        const foundationsElement = document.getElementById('foundationsPrice');
        if (foundationsElement) {
            foundationsElement.textContent = formattedPrice;
        }
        
        // Update Additional Challenge Price
        const additionalChallengeElement = document.getElementById('additionalChallengePrice');
        if (additionalChallengeElement) {
            additionalChallengeElement.textContent = formattedPrice;
        }
    }).catch((error) => {
        console.error('Foundations price preview error:', error);
    });


    // Add this new event listener at the bottom of the script section:
    document.getElementById('ultimateCheckoutButton').addEventListener('click', function() {
        alert('Ultimate tier coming soon! Please contact us for early access.');
    });
</script>

<!-- Challenge Selector Modal -->
<div 
    x-show="challengeModalOpen" 
    x-cloak
    class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4"
    @click="challengeModalOpen = false">

    <div class="bg-white dark:bg-gray-900 rounded-lg p-0 w-full max-w-4xl flex flex-col max-h-[90vh]" 
         @click.stop>
        <!-- Header -->
        <div class="flex justify-between items-center px-6 py-4 border-b border-gray-200 dark:border-gray-700">
            <h2 class="text-2xl font-bold text-gray-900 dark:text-white">
                Choose Your 30-Day Habit Challenge
            </h2>
            <button @click="challengeModalOpen = false" class="text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200">
                <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12" />
                </svg>
            </button>
        </div>

        <!-- Main Content -->
        <div class="flex-1 overflow-y-auto p-6">
            <p class="text-lg text-gray-600 dark:text-gray-400 mb-6">
                Pick ONE challenge to start your transformation:
            </p>
            
            <!-- Challenge Grid -->
            <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4">
                <template x-for="challenge in challenges" :key="challenge.id">
                    <button 
                        @click="selectedChallenge = challenge.id"
                        :class="{
                            'ring-2 ring-habit-color-green-core bg-habit-color-green-tint-2 dark:bg-gray-800': selectedChallenge === challenge.id,
                            'hover:border-gray-400 dark:hover:border-gray-600': selectedChallenge !== challenge.id
                        }"
                        class="p-6 border border-gray-200 dark:border-gray-700 rounded-lg text-left transition-all bg-white dark:bg-gray-900">
                        <div class="text-3xl mb-3" x-text="challenge.emoji"></div>
                        <h3 class="font-semibold text-gray-900 dark:text-white mb-2" x-text="challenge.name"></h3>
                        <p class="text-sm text-gray-600 dark:text-gray-400" x-text="challenge.desc"></p>
                    </button>
                </template>
            </div>
        </div>

        <!-- Footer -->
        <div class="flex justify-end space-x-4 px-6 py-4 border-t border-gray-200 dark:border-gray-700">
            <button 
                @click="challengeModalOpen = false"
                class="px-6 py-2 rounded-md bg-gray-300 dark:bg-gray-700 text-gray-700 dark:text-gray-300 hover:bg-gray-400 dark:hover:bg-gray-600 transition-colors duration-200">
                Cancel
            </button>
            <button
                @click="
                    if (selectedChallenge) {
                        // For now, just close the modal
                        // Later this will proceed to Paddle checkout with the selected challenge
                        console.log('Selected challenge:', selectedChallenge);
                        challengeModalOpen = false;
                        
                        // Show the Paddle checkout
                        Paddle.Checkout.open({
                            settings: {
                                displayMode: 'overlay',
                                theme: 'light',
                                locale: 'en',
                                successUrl: window.location.origin + '/success'
                            },
                            items: [{
                                priceId: 'pri_01jrzn9mekj4dnxsx39vd473v2',
                                quantity: 1
                            }]
                        });
                    }
                "
                :disabled="!selectedChallenge"
                class="px-6 py-2 rounded-md text-white transition-colors duration-200"
                :class="{
                    'opacity-50 cursor-not-allowed bg-gray-400': !selectedChallenge,
                    'bg-habit-color-green-core hover:bg-opacity-90': selectedChallenge
                }">
                Continue ‚Üí
            </button>
        </div>
    </div>
</div>

{{end}} 